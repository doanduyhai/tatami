<!DOCTYPE html>
<html lang="en"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org">

  <head th:substituteby="templates/global :: header" />	
  <body>

	<div id="topbar-home" th:substituteby="templates/global :: topbar-home"></div>

	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span4">
				<div class="tabbable">
                    <ul class="nav nav-tabs">
						<li class="active">
							<a id="defaultTab" href="#homeTabContent" data-toggle="pill">Show profile</a>
						</li>
						<li>
							<a href="#profileTabContent" data-toggle="pill"><i class="icon-edit"></i>Update Profile</a>
						</li>
					</ul>
					<div id="userDetailsPanel" class="tab-content alert alert-info">
						<div class="tab-pane active" id="homeTabContent">
									
						</div>
						<div class="tab-pane" id="profileTabContent">					
						</div>
					</div>
				</div>
                <div>
                    <div class="alert alert-info" id="followUserContent">
                    
                    </div>
                </div>
			</div>

			<div class="span8">
				<div class="tabbable">
					<ul class="nav nav-tabs">
						<li class="active">
							<a id="mainTab" href="#timeLinePanel" data-toggle="tab">Tweets</a>
						</li>
						<li>
							<a id="favTab" href="#favLinePanel" data-toggle="tab"><i class="icon-heart"></i> Favorite Tweets</a>
						</li>
						<li>
							<a id="userTab" href="#userLinePanel" data-toggle="tab"><i class="icon-user"></i> Other User Tweets</a>
						</li>
						<li>
							<a id="tagTab" href="#tagLinePanel" data-toggle="tab"><i class="icon-tag"></i> Tag Tweets</a>
						</li>
						<li>
							<a id="chartTab" href="#chartPanel" data-toggle="tab">Tweets of the day Pie chart</a>
						</li>
					</ul>
					<div id="tweetsPanel" class="tab-content alert alert-success">
						<div class="tab-pane active" id="timeLinePanel"></div>
						<div class="tab-pane" id="favLinePanel"></div>
						<div class="tab-pane" id="userLinePanel"></div>
						<div class="tab-pane" id="tagLinePanel"></div>
						<div class="tab-pane" id="chartPanel"></div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<footer id="center-footer" th:substituteby="templates/global :: footer"></footer>
	<footer id="home-javascript" th:substituteby="templates/global :: home-javascript"></footer>
	

	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
        resetNbTweets();
		
        !function ( $ ) {
        	// left panel
        	loadHome();
        	loadProfile();
        	loadWhoToFollow();
        	
            // auto-refresh
		    $('a[data-toggle="pill"]').on('show', function(e) {
		    	if (e.target.hash == '#homeTabContent') {
		    		updateUserCounters();
		    	} 
		    });

		    // right panel
		    loadTimeline();

            // auto-refresh
		    $('a[data-toggle="tab"]').on('show', function(e) {
		    	if (e.target.hash == '#timeLinePanel') {
		    		loadTimeline();
		    	}
		    	else if(e.target.hash == '#favLinePanel') {
		    		loadFavoritesline();
		    	}
		    	else if(e.target.hash == '#userLinePanel') {
		    		loadUserline();
		    	}	    	
		    });
		    
		    // browser's refresh shortcut override
			shortcut.add("Ctrl+R", function() {
				loadTimeline();
			});

		    // infinite scroll
			$(window).scroll(function() { 
				if ($('#timeline').is(':visible') && $(window).scrollTop() >= $(document).height() - $(window).height()) {
					listTweets(false);
				}
			});
        }( window.jQuery );
        /*]]>*/
	</script>

	
  </body>
</html>
