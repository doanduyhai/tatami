(function(a){a.fn.extend({jqEasyCounter:function(b){return this.each(function(){function h(){var a=c.val(),b=a.length;if(d.msgShortUrl){var g=a.match(e);for(i in g){b=b-g[i].length+d.msgShortUrlLength}}if(b>d.maxChars){b=d.maxChars-b}if(b<0){f.find(".badge").removeClass(d.msgWarningClass).addClass(d.msgErrorClass)}else if(b>=d.maxCharsWarning){f.find(".badge").removeClass(d.msgErrorClass).addClass(d.msgWarningClass)}else{console.log("Reset classes");f.find(".badge").removeClass(d.msgWarningClass+" "+d.msgErrorClass)}f.find(".badge").html(b+"/"+d.maxChars);if(d.msgShortUrl){f.find(".shortUrl").html(" ShortUrl size: "+d.msgShortUrlLength+" characters")}f.stop().fadeTo("fast",1)}var c=a(this),d=a.extend({maxChars:100,maxCharsWarning:80,msgFontSize:"12px",msgFontColor:"#000000",msgFontFamily:"Arial",msgTextAlign:"right",msgWarningClass:"badge-warning",msgErrorClass:"badge-error",msgShortUrl:false,msgShortUrlLength:13,msgUrlPattern:"((?:(?:https?|ftp|file)://|www)[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|])",msgAppendMethod:"insertAfter"},b);if(d.maxChars<=0)return;var e=new RegExp(d.msgUrlPattern,"g");var f=a("<div class=\"jqEasyCounterMsg\"><span class='badge'></span><span class='shortUrl'></span></div>");var g={"font-size":d.msgFontSize,"font-family":d.msgFontFamily,color:d.msgFontColor,"text-align":d.msgTextAlign,width:c.width(),opacity:0};f.css(g);f[d.msgAppendMethod](c);c.bind("keydown keyup keypress",h).bind("focus paste",function(){setTimeout(h,10)}).bind("blur",function(){f.stop().fadeTo("fast",0);return false});})}})})(jQuery)